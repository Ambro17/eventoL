{% extends "generic-bootstrap-model-form.html" %}
{% load staticfiles %}
{% load i18n %}
{% load account %}
{% load socialaccount %}

{% block other-head %}
    {% include 'autocomplete_light/static.html' %}
{% endblock %}

{% block page-header %}{% trans "Add Organizers" %}{% endblock %}

{% block page-name %}{% trans "Add Organizers" %}{% endblock %}

{% block pre-form %}
    <div class="alert alert-warning alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <span class="fa fa-info-circle fa-5x"></span>
        <p>{% blocktrans %} Organizers can edit the event information, view attendant's list, manage activities, manage
            attendance and also add other organizers. Please choose carefully! {% endblocktrans %} </p>
    </div>

    <div class="row">
        <div class="col-sm-10 col-sm-offset-1 col-xs-12">
            <h3>{% trans "Current organizers:" %}</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2 col-xs-12">
            <div class="list-group">
                {% for organizer in organizers %}
                    {% user_display organizer.eventUser.user as user_display %}
                    {% get_social_accounts organizer.eventUser.user as accounts %}
                    <div class="list-group-item">
                        <div class="row-picture">
                            {% if organizer.eventUser.user.socialaccount_set.all|length > 0 %}
                                <img class="circle"
                                     src="{{ organizer.eventUser.user.socialaccount_set.all.0.get_avatar_url }}"/>
                            {% else %}
                                <img class="circle" src="http://www.lessonpaths.com/avatars/no_avatar_large.jpg"/>

                            {% endif %}
                        </div>
                        <div class="row-content">
                            <h4 class="list-group-item-heading">{{ user_display }}</h4>

                            <p class="list-group-item-text">{{ organizer.eventUser.user.first_name }} {{ organizer.eventUser.user.last_name }}</p>
                        </div>
                    </div>
                    <div class="list-group-separator"></div>
                {% endfor %}
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-sm-10 col-sm-offset-1 col-xs-12">
            <h3>{% trans "Add a new Organizer:" %}</h3>
            <hr>
        </div>
    </div>

{% endblock %}

{% block form-id %}"add-organizers"{% endblock %}

{% block form-name %}{% trans "Add Organizers" %}{% endblock %}

{% block form-action %}"/event/{{ event_slug }}/organizers"{% endblock %}

{% block submit-button %}{% trans "Add Organizer" %}{% endblock %}

{% block other-script %}
    <script>
        $(document).ready(function() {

            var eventUserAutocomplete = $('.autocomplete-light-widget');

            eventUserAutocomplete.yourlabsWidget().autocomplete.data = {
                'event_slug': "{{ event_slug }}"
            };
        });
    </script>
{% endblock %}