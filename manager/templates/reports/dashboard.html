{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load filters %}
{% load cropping %}

{% block other-head %}
    <link rel="stylesheet" type="text/css" href="{% static "manager/bower_components/morrisjs/morris.css" %}">
    <script src="{% static "manager/bower_components/raphael/raphael-min.js" %}"></script>
    <script src="{% static "manager/bower_components/morrisjs/morris.min.js" %}"></script>
{% endblock %}

{% block page-header %}
    <div class="row">
        {% trans "Reports" %}
    </div>
{% endblock %}

{% block content %}

    <div class="row">
        <div class="row col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <strong>{% trans "Attendee" %}</strong>
                </div>
                <div class="panel-body">
                    {% if confirmed_attendees_count > 0 or not_confirmed_attendees_count > 0 %}
                        <i class="fa fa-users" style="color: #0b62a4"> {% trans "Attendees Confirmed" %} </i><br>
                        <i class="fa fa-users" style="color: #FA5858"> {% trans "Attendees Not Confirmed" %}</i><br><br>
                        <div id="attendee"></div>
                    {% else %}
                        <strong>{% trans "There aren't any registered attendees" %}</strong>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="row col-md-6" style="margin-left: 10px">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <strong>{% trans "Staff" %}</strong>
                </div>
                <div class="panel-body">
                    {% if collaborators_count > 0 or installers_count > 0 or speakers_count > 0 or organizers_count > 0 %}
                        <i class="fa fa-users" style="color: #FFBB13"> {% trans "Organizers" %}</i><br>
                        <i class="fa fa-users" style="color: #0b62a4"> {% trans "Collaborators" %}</i><br>
                        <i class="fa fa-users" style="color: #FA5858"> {% trans "Installers" %}</i><br>
                        <i class="fa fa-users" style="color: #4da74d"> {% trans "Speakers" %}</i>
                        <div id="staff"></div>
                    {% else %}
                        <strong>{% trans "There aren't any registered staff" %}</strong>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="row col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <strong>{% trans "Totals" %}</strong>
                </div>
                <div class="panel-body">
                    {% if talk_proposals_count > 0 or installations_count > 0 %}
                        <div id="counts"></div>
                    {% else %}
                        <strong>{% trans "There aren't any talks or installations submitted" %}</strong>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="row col-md-6" style="margin-left: 10px">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <strong>{% trans "Installations" %}</strong>
                </div>
                <div class="panel-body">
                    {% if installation_for_software %}
                        <div id="installations"></div>
                    {% else %}
                        <strong>{% trans "There aren't any registered installations" %}</strong>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="row col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <strong>{% trans "Votes For Talks" %}</strong>
                </div>
                <div class="panel-body">
                    {% if votes_for_talk %}
                        <div id="votes"></div>
                    {% else %}
                        <strong>{% trans "There aren't any talk proposals submitted" %}</strong>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="row col-md-6" style="margin-left: 10px">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <strong>{% trans "Installer Per Level" %}</strong>
                </div>
                <div class="panel-body">
                    {% if installers_for_level %}
                        <div id="installers"></div>
                    {% else %}
                        <strong>{% trans "There aren't any registered installations" %}</strong>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block other-script %}

    <script src="{% static "manager/bower_components/q/q.js" %}"></script>

    <script type="text/javascript">

        $(document).ready(function() {

          {% if confirmed_attendees_count > 0 or not_confirmed_attendees_count > 0 %}

                Morris.Donut({
                  element: 'attendee',
                  data: [
                    {label: "{% trans "Confirmed Attendees" %}", value: {{confirmed_attendees_count}}, color: "#0b62a4"},
                    {label: "{% trans "Unconfirmed Attendees" %}", value: {{not_confirmed_attendees_count}}, color: "#FA5858"}
                  ]
                });;
          {% endif %}


          {% if collaborators_count > 0 or installers_count > 0 or speakers_count > 0 or organizers_count > 0 %}
              Morris.Donut({
                element: 'staff',
                data: [
                  {label: "{% trans "Collaborators" %}", value: {{collaborators_count}}, color: "#0b62a4"},
                  {label: "{% trans "Installers" %}", value: {{installers_count}}, color: "#FA5858"},
                  {label: "{% trans "Speakers" %}", value: {{speakers_count}}, color: "#4da74d"},
                  {label: "{% trans "Organizers" %}", value: {{organizers_count}}, color: "#FFBB13"}
                ]
              });
          {% endif %}

          {% if votes_for_talk %}
              Morris.Bar({
                element: 'votes',
                data: [{% for item, value in votes_for_talk.items%}
                          { y: '{{item}}', a: {{value}}},
                      {% endfor %}],
                xkey: 'y',
                ykeys: ['a'],
                labels: ['{% trans "Total" %}']
              });
          {% endif %}
          {% if installers_for_level %}
              var installer_levels = {
                  1: '{% trans 'Beginner' %}',
                  2: '{% trans 'Medium' %}',
                  3: '{% trans 'Advanced' %}',
                  4: '{% trans 'Super Hacker' %}'
                }
                Morris.Bar({
                  element: 'installers',
                  data: [{% for item, value in installers_for_level.items%}
                            { y: installer_levels[{{item}}], a: {{value}}},
                        {% endfor %}],
                  xkey: 'y',
                  ykeys: ['a'],
                  labels: ['{% trans "Total" %}']
                });
          {% endif %}
          {% if talk_proposals_count > 0 or installations_count > 0 %}
                Morris.Bar({
                  element: 'counts',
                  data: [
                    { y: '{% trans "Talks" %}', a: {{talk_proposals_count}} },
                    { y: '{% trans "Installations" %}', a: {{installations_count}} }
                  ],
                  xkey: 'y',
                  ykeys: ['a'],
                  labels: ['{% trans "Total" %}']
                });
          {% endif %}
          {% if installation_for_software %}
                Morris.Bar({
                  element: 'installations',
                  data: [{% for item, value in installation_for_software.items%}
                            { y: '{{item}}', a: {{value}}},
                        {% endfor %}],
                  xkey: 'y',
                  ykeys: ['a'],
                  labels: ['{% trans "Total" %}']
                });
          {% endif %}

        });

    </script>
{% endblock %}
